<div>
    <h3>Измененные сущности</h3>
    <div>
        <table class="table table-striped table-bordered table-condensed">
            <thead>
            <th>Тип сущности</th>
            <th>Ключ</th>
            <th>Состояние</th>
            </thead>
            <tbody ng-repeat="e in changedEntities">
                <tr>
                    <td rowspan="2">{{e.entityType.shortName}}</td>
                    <td>{{e.entityAspect.getKey().values}}</td>
                    <td>{{e.entityAspect.entityState.name}}</td>
                </tr>
                <tr>
                    <td colspan="2">
                        <table class="table table-small">
                            <thead>
                            <th>Свойство</th>
                            <th>Исходное значение</th>
                            <th>Текущее значение</th>
                            <th>Ошибки валидации</th>
                            </thead>
                            <tr ng-repeat="(k,v) in e.entityAspect.originalValues">
                                <td>{{k}}</td>
                                <td>{{v}}</td>
                                <td>{{e[k]}}</td>
                                <td><span class="text-error" ng-repeat="r in e.entityAspect.getValidationErrors(k)">{{r.errorMessage}}</span></td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </tbody>
        </table>
        <button class="btn" ng-click="reset()">Reset All</button>
        <button class="btn" ng-click="update()">Save All</button>
    </div>

    <!-- Using bootstrap grid system instead of table
    Changed Entities
    <div class="row-fluid">
        <div class="span3">Entity Type</div>
        <div class="span3">Entity State</div>
        <div class="span6">Entity Key</div>
    </div>
    <div class="row-fluid">
            <div class="span1"></div>
            <div class="span1">Property</div>
            <div class="span3">Original Value</div>
            <div class="span3">Current Value</div>
            <div class="span4">Validation Errors</div>
    </div>
    <div ng-repeat="e in changedEntities">
        <div class="row-fluid">
            <div class="span3">{{e.entityType.shortName}}</div>
            <div class="span3">{{e.entityAspect.entityState.name}}</div>
            <div class="span6">{{e.entityAspect.getKey().values}}</div>
        </div>
        <div ng-repeat="(k,v) in e.entityAspect.originalValues" class="row-fluid">
            <div class="span1"></div>
            <div class="span1">{{k}}</div>
            <div class="span3 text-info">{{v}}</div>
            <div class="span3 text-success">{{e[k]}}</div>
            <div class="span4"><span class="text-error" ng-repeat="r in e.entityAspect.getValidationErrors(k)">{{r.errorMessage}}</span></div>
        </div>
    </div>
    -->
</div>

